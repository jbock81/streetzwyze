(function(e){"use script";var t={height:700,width:450};var i=function(){var e=document.getElementsByTagName("script"),t=e[e.length-1].getAttribute("src"),i=t.substr(0,t.lastIndexOf("/")+1)+"../",n=document.createElement("a");n.href=i;console.log("Auto Detected BASE URL",n.href);return n.href}();var n=function(e){var n=this;e=e||i;this.displayPopup=function(o,r,a){var d=n.getUrl(o,r);a=a||{};if(this.isMobile.any){window.location.href=d;return}var s="CashVaultPlugin-PopupWrapper",l;l=document.getElementById(s);if(l){l.innerHTML="";l.style.display="block"}else{l=document.createElement("div");l.id=s}var h={zIndex:9999,topBarHeight:0};var u=e+"static/img/loading-bg.gif";var p="<button id='CashVaultPlugin-closeBtn' type='button' style='background: none; border: none; font-size: 20px; font-weight: bold; width: 24px; height: 24px; line-height: 20px; background: grey; color: #fff; border-radius: 50%; position: absolute; top: 8px; right: 8px;'>&times;</button>",c='<div style="position: fixed; z-index: '+h.zIndex+'; background: #333; top: 0; left: 0; opacity: 0.2; width: 100%; height: 100%;" class="CashVaultPlugin-overlay"></div>';c+='<div id="CashVaultPlugin-container" style="position: absolute; '+"z-index: "+(h.zIndex+10)+"; max-width: 95%; background: top center no-repeat url("+u+');">'+p+'<div id="CashVaultPlugin-frameWrapper" style="background: transparent; padding: 0; box-sizing: content-box;"> <iframe style="border: none;width: 100%; height:100%;" src="'+d+'"  frameborder="0"></iframe></div>'+"</div>";function f(e,i){window.scroll(0,0);var n=.95*window.innerWidth,o=.99*window.innerHeight,r=e||t.height,a=Math.min(n,i||t.width),d=a===n?0:(n-a)/2,s=r>=o?0:(o-r)/2;var l=document.getElementById("CashVaultPlugin-container");l.style.height=r+"px";l.style.width=a+"px";l.style.top=s+"px";l.style.left=d+"px";var u=document.getElementById("CashVaultPlugin-frameWrapper");u.style.height=r-h.topBarHeight+"px"}l.innerHTML=c;document.body.appendChild(l);f();if(a.onShow&&typeof a.onShow==="function"){a.onShow()}window.removeEventListener("resize",f);window.addEventListener("resize",f);document.getElementById("CashVaultPlugin-closeBtn").addEventListener("click",function(){l.style.display="none";if(a.onClose&&typeof a.onClose==="function"){a.onClose()}window.removeEventListener("resize",f)});window.addEventListener("message",function(e){if(i.indexOf(e.origin)===0){switch(e.data.type){case"size":var t=document.getElementById("CashVaultPlugin-container");var n=e.data.height,o=e.data.width;if(n){t.style.height=n+h.topBarHeight+"px"}if(o){t.style.width=o+"px"}var r=document.getElementById("CashVaultPlugin-frameWrapper");r.style.height=n+"px";f(n+h.topBarHeight,o);break}}})};this.getUrl=function(t,i){if(!t){throw"Reservation ID must be provided for plugin to work"}i=i||{};var n=[],o;n.push("rid="+encodeURIComponent(t));for(var r in i){if(i.hasOwnProperty(r)&&["rid","reservationId","autoShow"].indexOf(r)<0){o=r.match(/^customer/)?r.substr(0,1).toUpperCase()+r.substr(1):r;n.push(encodeURIComponent(o)+"="+encodeURIComponent(i[r]))}}return e+"pay?"+n.join("&")}};(function(e){var t=/iPhone/i,i=/iPod/i,n=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,r=/Android/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,d=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,s=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,u=/BB10/i,p=/Opera Mini/i,c=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=new RegExp("(?:"+"Nexus 7"+"|"+"BNTV250"+"|"+"Kindle Fire"+"|"+"Silk"+"|"+"GT-P1000"+")","i");var b=function(e,t){return e.test(t)};var g=function(e){var g=e||navigator.userAgent;var w=g.split("[FBAN");if(typeof w[1]!=="undefined"){g=w[0]}this.apple={phone:b(t,g),ipod:b(i,g),tablet:!b(t,g)&&b(n,g),device:b(t,g)||b(i,g)||b(n,g)};this.amazon={phone:b(a,g),tablet:!b(a,g)&&b(d,g),device:b(a,g)||b(d,g)};this.android={phone:b(a,g)||b(o,g),tablet:!b(a,g)&&!b(o,g)&&(b(d,g)||b(r,g)),device:b(a,g)||b(d,g)||b(o,g)||b(r,g)};this.windows={phone:b(s,g),tablet:b(l,g),device:b(s,g)||b(l,g)};this.other={blackberry:b(h,g),blackberry10:b(u,g),opera:b(p,g),firefox:b(f,g),chrome:b(c,g),device:b(h,g)||b(u,g)||b(p,g)||b(f,g)||b(c,g)};this.seven_inch=b(v,g);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if(typeof window==="undefined"){return this}};var w=function(){var e=new g;e.Class=g;return e};if(typeof module!="undefined"&&module.exports&&typeof window==="undefined"){module.exports=g}else if(typeof module!="undefined"&&module.exports&&typeof window!=="undefined"){module.exports=w()}else if(typeof define==="function"&&define.amd){define("isMobile",[],e.isMobile=w())}else{e.isMobile=w()}})(n.prototype);window.addEventListener("load",function(){console.log("Searching for reservation buttons");var e=document.querySelectorAll("[data-reservation-id]");if(e.length<1){console.log("No reservation button found.");return}var t=new n;var i=function(e){var i=e.dataset;t.displayPopup(i.reservationId,i,{onShow:function(){console.log("Payment launched for reservation: "+i.reservationId)},onClose:function(){console.log("Payment closed for reservation: "+i.reservationId)}})};var o=false,r,a;for(var d=0;d<e.length;d++){r=e[d],a=r.dataset.autoShow;if(a&&a.toLowerCase()==="true"&&!o){i(r);o=true}r.addEventListener("click",function(){i(this)})}});e.CashVaultPlugin=n})(this);
//# sourceMappingURL=plugin.min.map